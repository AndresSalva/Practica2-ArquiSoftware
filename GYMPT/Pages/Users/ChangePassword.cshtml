@page "{token}"
@model GYMPT.Pages.Users.ChangePasswordModel
@{
    ViewData["Title"] = "Cambiar Contraseña";
}
<form method="post" class="card shadow-sm p-4 mx-auto" style="max-width: 500px;">
    <h4 class="text-center mb-4">Cambio de Contraseña</h4>

    <div class="mb-3">
        <label asp-for="NewPassword" class="form-label fw-bold">Nueva Contraseña</label>
        <input asp-for="NewPassword" type="password" class="form-control" placeholder="Ingresa tu nueva contraseña" required />
    </div>

    <div class="mb-3">
        <label asp-for="RepeatPassword" class="form-label fw-bold">Repite la Nueva Contraseña</label>
        <input asp-for="RepeatPassword" type="password" class="form-control" placeholder="Confirma tu nueva contraseña" required />
    </div>

    <input type="hidden" asp-for="UserId" />

    <div class="d-grid">
        <button type="submit" class="btn btn-primary">Guardar</button>
    </div>
</form>

@if (!string.IsNullOrEmpty(Model.Message))
{
    <p>@Model.Message</p>
}

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const message = "@Model.Message";

        if (message && message.length > 0) {
            if (message.includes("correctamente")) {
                Swal.fire({
                    icon: 'success',
                    title: '¡Contraseña actualizada!',
                    text: message,
                    confirmButtonText: 'Ir al inicio',
                    confirmButtonColor: '#3085d6'
                }).then((result) => {
                    if (result.isConfirmed) {
                        window.location.href = '/Index';
                    }
                });
            } else {
                Swal.fire({
                    icon: 'error',
                    title: 'Error',
                    text: message,
                    confirmButtonText: 'Intentar de nuevo',
                    confirmButtonColor: '#d33'
                });
            }
        }
    });
</script>